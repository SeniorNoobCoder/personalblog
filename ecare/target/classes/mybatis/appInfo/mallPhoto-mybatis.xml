<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="com.ecare.web.appInfo.mallPhoto">
	<!-- 查询列表信息 -->
	<select id="findListPage" parameterType="Page" resultType="pd">
		select 
			a.*
    	from app_mall_photo a
    		where 1=1
    		<if test="pd.remove_logo != null and pd.remove_logo != ''">
			and a.remove_logo=#{pd.remove_logo}
			</if>
			<if test="pd.status != null and pd.status != ''">
			and a.status=#{pd.status}
			</if>
    		order by a.order_by
	</select>
	
	<!--查询版本信息详情-->
    <select id="findInfo" parameterType="pd" resultType="pd">
    	select
			a.*
    	from app_mall_photo a
    	where a.id=#{id}
    </select>
    
    <!-- 添加版本信息 -->
	<insert id="save" parameterType="pd">
		insert into app_mall_photo (
				title,
				image_href,
				action_url,
				status,
				order_by,
				remark,
				remove_logo,
				create_time,
				operator_id,
				operator_name,
				update_time
    			)
    			values
    			(
				#{title},
				#{image_href},
				#{action_url},
				#{status},
				#{order_by},
				#{remark},
				#{remove_logo},
				NOW(),
				#{operator_id},
				#{operator_name},
				#{update_time}
				)
    </insert>
    
    <!--更新信息-->
    <update id="update" parameterType="pd">
    	update app_mall_photo set
    		<if test="title != null and title != '' ">
				title=#{title},
			</if>
			<if test="image_href != null and image_href != '' ">
				image_href=#{image_href},
			</if>
			<if test="action_url != null and action_url != '' ">
				action_url=#{action_url},
			</if>
			<if test="status != null and status != '' ">
				status=#{status},
			</if>
			<if test="order_by != null and order_by != '' ">
				order_by=#{order_by},
			</if>
			<if test="remark != null and remark != '' ">
				remark=#{remark},
			</if>
			<if test="remove_logo != null and remove_logo != '' ">
				remove_logo=#{remove_logo},
			</if>
    		update_time= NOW()
    		where id=#{id}
    </update>
    
    <!--删除信息-->
    <delete id="delete" parameterType="String">
    	delete from app_mall_photo where id=#{id}
    </delete>
    
    <!--查询信息数量-->
    <select id="findNum" parameterType="pd" resultType="Integer">
    	select count(*) from app_mall_photo
    	where 1=1
		<if test="remove_logo != null and remove_logo != '' ">
		 AND remove_logo= #{remove_logo}
		</if>
		<if test="status != null and status != '' ">
		  AND status= #{status}
		</if>
    </select>
    
    <!--查询已删除用户ids-->
    <select id="findListIds" parameterType="pd" resultType="Integer">
    	select 
    		a.id as "id"
    	 from app_mall_photo a
    	 where a.remove_logo='Y'
    </select>
	</mapper>