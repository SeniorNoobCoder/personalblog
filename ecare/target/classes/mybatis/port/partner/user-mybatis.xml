<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ecare.web.port.partner.user">
    
	<!--查询登录信息-->
    <select id="findLoginInfo" resultType="pd" parameterType="pd">
    	select
    		a.id as "id",
    		a.login_name as "login_name",
    		a.login_password as "login_password",
    		a.user_name as "user_name",
    		a.status as "status",
    		a.is_authent as "is_authent",
    		a.phone as "phone",
    		a.email as "email",
    		a.head_address as "head_address",
    		a.remark as "remark",
    		a.area_id as "area_id",
    		a.session_id as "session_id",
    		a.remove_logo as "remove_logo",
    		a.create_user as "create_user",
    		a.create_time as "create_time",
    		a.update_time as "update_time"
    		from partner_user a
    		where a.status='Y' and a.remove_logo='N'
			<if test="login_name != null and login_name != ''"><!-- 状态检索 -->
				and a.login_name=#{login_name}
			</if>
			<if test="login_password != null and login_password != ''"><!-- 状态检索 -->
				and a.login_password=#{login_password}
			</if>
    </select>
    
    
    <update id="updateUser" parameterType="pd">
    	update partner_user set session_id=#{session_id},update_time=#{update_time} where id=#{id}
    </update>
    
    
</mapper>