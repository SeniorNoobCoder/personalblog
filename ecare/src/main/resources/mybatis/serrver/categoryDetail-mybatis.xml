<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ecare.web.server.categoryDetail">
    <!-- 查询分页 -->
    <select id="findListPage" resultType="pd" parameterType="page">
        SELECT  * FROM server_category_detail
        WHERE 1=1
        <if test="pd.remove_logo != null and pd.remove_logo != '' ">
            AND remove_logo = #{pd.remove_logo}
        </if>
        <if test="pd.server_category_id != null and pd.server_category_id != '' ">
            AND server_category_id = #{pd.server_category_id}
        </if>
        ORDER BY order_by
    </select>
    <!--  查询无分页 -->
    <select id="findList" parameterType="pd" resultType="pd">
        SELECT  * FROM server_category_detail
        WHERE 1=1
        <if test="remove_logo != null and remove_logo != '' ">
            AND remove_logo = #{remove_logo}
        </if>
        <if test="server_category_id != null and server_category_id != '' ">
            AND server_category_id = #{server_category_id}
        </if>
        ORDER BY order_by
    </select>
    <!--查询信息详情-->
    <select id="findInfo" resultType="pd" parameterType="pd">
        SELECT *  FROM server_category_detail
        WHERE id =#{id}
    </select>


    <!--保存信息-->
    <insert id="save" parameterType="pd">
        insert into server_category_detail (
        server_category_id,
        remark,
        create_time,
        work_hours,
        starting_price,
        price,
        charge_mode_time,
        charge_mode_unit,
        remove_logo,
        pay_type,
        order_by)
        values (
        #{server_category_id},
        #{remark},
        NOW(),
        #{work_hours},
        #{starting_price},
        #{price},
        #{charge_mode_time},
        #{charge_mode_unit},
        #{remove_logo},
        #{pay_type},
        #{order_by})
    </insert>

    <!--保存信息-->
    <insert id="saveCategoryDetail" parameterType="pd">
        insert into server_category (
        name,
        parent_id,
        remove_logo,
        create_time,
        order_by,
        create_user,
        level,
        type)
        values (
        #{name},
        #{parent_id},
        #{remove_logo},
        NOW(),
        #{order_by},
        #{create_user},
        #{level},
        #{type})
    </insert>
    <!--更新信息-->
    <update id="update" parameterType="pd">
        update server_category_detail set
        <if test="remark != null and remark != '' ">
            remark=#{remark},
        </if>
        <if test="work_hours != null and work_hours != '' ">
            work_hours=#{work_hours},
        </if>
        <if test="starting_price != null and starting_price != '' ">
            starting_price=#{starting_price},
        </if>
        <if test="price != null and price != '' ">
            price=#{price},
        </if>
        <if test="charge_mode_time != null and charge_mode_time != '' ">
            charge_mode_time=#{charge_mode_time},
        </if>
        <if test="charge_mode_unit != null and charge_mode_unit != '' ">
            charge_mode_unit=#{charge_mode_unit},
        </if>
        <if test="remove_logo != null and remove_logo != '' ">
            remove_logo=#{remove_logo},
        </if>
        <if test="order_by != null and order_by != '' ">
            order_by=#{order_by},
        </if>
        <if test="pay_type != null and pay_type != '' ">
            pay_type=#{pay_type},
        </if>
        update_time= NOW()
        where id=#{id}
    </update>

    <!--删除信息-->
    <delete id="delete" parameterType="String">
        delete from server_category_detail where id=#{id}
    </delete>
    <!--查询条数-->
    <select id="findListNum" parameterType="pd" resultType="Integer">
        select count(*) from server_category_detail
        where 1=1
        <if test="remove_logo != null and remove_logo != ''">
            and remove_logo =#{remove_logo}
        </if>
        <if test="server_category_id != null and server_category_id != '' ">
            AND server_category_id = #{server_category_id}
        </if>
    </select>
</mapper>