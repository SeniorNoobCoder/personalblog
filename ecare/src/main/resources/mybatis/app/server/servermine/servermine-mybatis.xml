<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ecare.app.server.servermine">
	
	<!-- 意见反馈 -->
	<insert id="saveFeedback" parameterType="pd">
	  insert into common_feedback(
	  type,
	  content,
	  status,
	  create_time,
	  create_user,
	  remove_logo
	  )values(
	  #{type},
	  #{content},
	  #{status},
	  NOW(),
	  #{create_user},
	  #{remove_logo}
	  )
	</insert>
	
	<!-- 商家信息 -->
	<select id="findUserInfo"  parameterType="pd"  resultType="pd">
		SELECT
			b.remark as 'remark'
		FROM
			server_info a
		LEFT JOIN partner_user b on a.partner_id=b.id
		where a.id=#{id}
	</select>
	
	<!-- 好评数量 -->
	<select id="findPraiseNum" parameterType="pd"   resultType="Integer">
		SELECT
			SUM(service_quality) AS num
		FROM
			customer_order_assessment a
		LEFT JOIN customer_order b ON a.order_no = b.order_no
		WHERE b.server_user_id=#{server_user_id}
	</select>
</mapper>